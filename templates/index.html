<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MAUDE Media Device Failure Classification</title>
    <link
      rel="stylesheet"
      type="text/css"
      href="{{ url_for('static', filename='style.css') }}"
    />
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@24,400,0,0&icon_names=event"
    />
    <script>
      function openTab(event, tabName) {
        var i, tabcontent, tablinks;
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
          tabcontent[i].style.display = "none";
        }

        tablinks = document.getElementsByClassName("tablink");
        for (i = 0; i < tablinks.length; i++) {
          tablinks[i].className = tablinks[i].className.replace(" active", "");
        }

        document.getElementById(tabName).style.display = "block";
        event.currentTarget.className += " active";
      }

      function submitText() {
        var brandName = document.getElementById("brand_name").value;
        var patientProblem = document.getElementById("patient_problem").value;
        var manufacturerNarrative = document.getElementById(
          "manufacturer_narrative"
        ).value;
        var eventDesc = document.getElementById("event_desc").value;

        fetch("/", {
          method: "POST",
          headers: {
            "Content-Type": "application/x-www-form-urlencoded",
          },
          body:
            "brand_name=" +
            encodeURIComponent(brandName) +
            "&patient_problem=" +
            encodeURIComponent(patientProblem) +
            "&manufacturer_narrative=" +
            encodeURIComponent(manufacturerNarrative) +
            "&event_desc=" +
            encodeURIComponent(eventDesc),
        })
          .then((response) => response.json())
          .then((data) => {
            document.getElementById("disabled_box").value = data.prediction;
          })
          .catch((error) => console.error("Error:", error));
      }
    </script>
  </head>
  <body>
    <div class="container">
      <div class="tab">
        <button
          class="tablink"
          onclick="openTab(event, 'Home')"
          id="defaultOpen"
        >
          Home
        </button>
        <button class="tablink" onclick="openTab(event, 'Model')">Model</button>
      </div>

      <div id="Home" class="tabcontent">
        <h1 class="title">MAUDE Media Device Failure Classification</h1>

        <form action="javascript:void(0);" class="form-center">
          <label for="brand_name">Brand Name:</label>
          <div class="search">
            <input
              type="text"
              id="brand_name"
              name="brand_name"
              class="search_input"
              placeholder="Enter Brand Name"
            />
          </div>
          <br />

          <label for="patient_problem">Patient Problem:</label>
          <div class="search">
            <input
              type="text"
              id="patient_problem"
              name="patient_problem"
              class="search_input"
              placeholder="Enter Patient Problem"
            />
          </div>
          <br />

          <label for="manufacturer_narrative">Manufacturer Narrative:</label>
          <div class="search">
            <textarea
              type="text"
              id="manufacturer_narrative"
              name="manufacturer_narrative"
              class="text_input"
              placeholder="Enter Manufacturer Narrative"
            ></textarea>
          </div>
          <br />

          <label for="event_desc">Event Description:</label>
          <div class="search">
            <textarea
              cols="40"
              rows="5"
              class="text_input"
              id="event_desc"
              name="event_desc"
              placeholder="Event Description"
            ></textarea>
          </div>
          <br />

          <button class="button" onclick="submitText()">Classify</button>
        </form>
        <br /><br />

        <div class="results">
          <label for="disabled_box"
            >Predicted Media Device Failure Classification:</label
          >
          <br />
          <div class="search prediction">
            <textarea
              class="text_input pred_text"
              id="disabled_box"
              name="disabled_box"
              rows="4"
              cols="50"
              placeholder="Predicted Device Failure"
              disabled
            ></textarea>
          </div>
        </div>
      </div>

      <div id="Model" class="tabcontent" style="display: none">
        <h1>Optimal Model Performance</h1>
        <p>Below are the details from the optimal model</p>
      </div>
    </div>

    <script>
      document.getElementById("defaultOpen").click();
    </script>
  </body>
</html>
